manifest {
    author = 'Charles Plessy'
    description = 'Pairwise genome alignment analysis'
    name = 'pairwiseGenomeAlignStats'
    homePage = ''
    nextflowVersion = '>=21.04.0'
    version = '0.19.0.1'   // GenomicBreaks version plus 1 for every change of the skeleton.
}

params {
// nf-core parameters
    enable_conda                      = false
    outdir                            = './results'
    publish_dir_mode                  = 'copy'
    singularity_pull_docker_container = false

// Mandatory parameters
    input                             = false

// Optional parameters
    skel                              = 'https://raw.githubusercontent.com/oist/plessy_nf_GenomicBreaks/main/skeleton.Rmd'

// Load nf-core custom profiles from different Institutions
    custom_config_version             = 'master'
    custom_config_base                = "https://raw.githubusercontent.com/nf-core/configs/${params.custom_config_version}"
}

try {
    includeConfig "${params.custom_config_base}/nfcore_custom.config"
} catch (Exception e) {
    System.err.println("WARNING: Could not load nf-core/config profiles: ${params.custom_config_base}/nfcore_custom.config")
}

process {
  withLabel:process_low {
    cpus = 2
    memory = 14.GB
    time =  6.h
  }
  withLabel:process_medium {
    cpus = 6
    memory = 42.GB
    time = 8.h
  }
  withLabel:process_high {
    cpus = 24
    memory = 84.GB
    time = 10.h
  }
  withLabel:process_long {
    time = 20.h
  }
}

timeline {
  enabled = true
  file = "$params.outdir/timeline.html"
  overwrite = true
}

report {
  enabled = true
  file = "$params.outdir/report.html"
  overwrite = true
}

executor {
    submitRateLimit = '2 sec'
}

/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a fast and simple pipeline test.

    Use as follows:
        nextflow run nf-core/pairgenomealign -profile test,<docker/singularity> --outdir <OUTDIR>

----------------------------------------------------------------------------------------
*/

profiles {
    test {
        process {
            resourceLimits = [
                cpus: 4,
                memory: '15.GB',
                time: '1.h'
            ]
        }
        params {
            config_profile_name        = 'Test profile'
            config_profile_description = 'Minimal test dataset to check pipeline function'
            input  = "input.tsv"
        }
    }
}
